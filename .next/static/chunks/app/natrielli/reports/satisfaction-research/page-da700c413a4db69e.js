(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[500],{2451:function(e,t,n){Promise.resolve().then(n.bind(n,3186))},6491:function(e,t,n){"use strict";var a=n(1258),o=n(357);let r=new a.InstancesMannager(o.env.REACT_APP_API_URL||"https://contec.inf.br");t.Z=r},9582:function(e,t){"use strict";t.Z=function(e){return 13===e.length?"+".concat(e.slice(0,2)," (").concat(e.slice(2,4),") ").concat(e.slice(4,5)," ").concat(e.slice(5,9),"-").concat(e.slice(9,13)):12===e.length?"+".concat(e.slice(0,2)," (").concat(e.slice(2,4),") ").concat(e.slice(4,8),"-").concat(e.slice(8,12)):11===e.length?"(".concat(e.slice(0,2),") ").concat(e.slice(2,5),"-").concat(e.slice(5,8),"-").concat(e.slice(8,11)):10===e.length?"(".concat(e.slice(0,2),") ").concat(e.slice(2,6),"-").concat(e.slice(6,10)):e}},3186:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return K}});var a=n(7437),o=n(2265),r=n(4649),l=n(6491);let c=["DATA_FIM_AVALIADO","DATA_FIM_PESQUISA","DATA_INICIO_AVALIADO","DATA_INICIO_PESQUISA"],i=["CONTATO","CLIENTE","OPERADOR","NUMERO"],A=["COD_ATENDIMENTO_AVALIADO","COD_ATENDIMENTO_PESQUISA","COD_CLIENTE","COD_NUMERO","COD_OPERADOR_AVALIADO"];async function s(e){let[t,n]=(0,r.createWhereString)({parameters:e,alias:"ar",dateColumns:c,likeColumns:i,numberColumns:A}),a=await l.Z.executeQuery("natrielli","SELECT * FROM (".concat("SELECT\n   waa.CODIGO AS COD_ATENDIMENTO_AVALIADO,\n   wap.CODIGO AS COD_ATENDIMENTO_PESQUISA,\n   waa.CODIGO_OPERADOR AS COD_OPERADOR_AVALIADO,\n   waa.CODIGO_CLIENTE AS COD_CLIENTE,\n   waa.CODIGO_NUMERO AS COD_NUMERO,\n   op.NOME AS OPERADOR,\n   cli.RAZAO AS CLIENTE,\n   wcn.NOME AS CONTATO,\n   wcn.NUMERO AS  NUMERO,\n   waa.DATA_INICIO AS DATA_INICIO_AVALIADO,\n   waa.DATA_FIM AS DATA_FIM_AVALIADO,\n   wap.DATA_INICIO AS DATA_INICIO_PESQUISA,\n   wap.DATA_FIM AS DATA_FIM_PESQUISA,\n   wf.NOTA_ATENDIMENTO AS AVALIACAO\nFROM w_atendimentos_feedbacks wf\nINNER JOIN w_atendimentos wap ON wap.CODIGO = wf.CODIGO_ATENDIMENTO\nINNER JOIN w_atendimentos waa ON waa.CODIGO = wf.CODIGO_ATENDIMENTO_AVALIADO\nINNER JOIN w_clientes_numeros wcn ON wcn.CODIGO = waa.CODIGO_NUMERO\nINNER JOIN clientes cli ON cli.CODIGO = waa.CODIGO_CLIENTE\nINNER JOIN operadores op ON op.CODIGO = wf.CODIGO_OPERADOR\n",") ar \n").concat(t),n).then(e=>e.result);return(0,r.toPaginated)(a,+e.page,+e.perPage)}var O=n(9500),u=n.n(O),I=n(2988),d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"},D=n(5636),f=o.forwardRef(function(e,t){return o.createElement(D.Z,(0,I.Z)({},e,{ref:t,icon:d}))}),_=n(6800),E=n.n(_),N=n(2475),C=n(9428),T=n(3627),p=n(6946),v=n(882),m=n(8884),w=o.forwardRef(function(e,t){var n=e.disabled,a=e.prefixCls,r=e.character,l=e.characterRender,c=e.index,i=e.count,A=e.value,s=e.allowHalf,O=e.focused,u=e.onHover,I=e.onClick,d=c+1,D=new Set([a]);0===A&&0===c&&O?D.add("".concat(a,"-focused")):s&&A+.5>=d&&A<d?(D.add("".concat(a,"-half")),D.add("".concat(a,"-active")),O&&D.add("".concat(a,"-focused"))):(d<=A?D.add("".concat(a,"-full")):D.add("".concat(a,"-zero")),d===A&&O&&D.add("".concat(a,"-focused")));var f="function"==typeof r?r(e):r,_=o.createElement("li",{className:E()(Array.from(D)),ref:t},o.createElement("div",{onClick:n?null:function(e){I(e,c)},onKeyDown:n?null:function(e){e.keyCode===v.Z.ENTER&&I(e,c)},onMouseMove:n?null:function(e){u(e,c)},role:"radio","aria-checked":A>c?"true":"false","aria-posinset":c+1,"aria-setsize":i,tabIndex:n?-1:0},o.createElement("div",{className:"".concat(a,"-first")},f),o.createElement("div",{className:"".concat(a,"-second")},f)));return l&&(_=l(_,e)),_}),h=["prefixCls","className","defaultValue","value","count","allowHalf","allowClear","keyboard","character","characterRender","disabled","direction","tabIndex","autoFocus","onHoverChange","onChange","onFocus","onBlur","onKeyDown","onMouseLeave"],R=o.forwardRef(function(e,t){var n,a=e.prefixCls,r=void 0===a?"rc-rate":a,l=e.className,c=e.defaultValue,i=e.value,A=e.count,s=void 0===A?5:A,O=e.allowHalf,u=void 0!==O&&O,d=e.allowClear,D=void 0===d||d,f=e.keyboard,_=void 0===f||f,R=e.character,L=void 0===R?"â˜…":R,g=e.characterRender,M=e.disabled,S=e.direction,y=void 0===S?"ltr":S,b=e.tabIndex,x=e.autoFocus,V=e.onHoverChange,F=e.onChange,P=e.onFocus,Z=e.onBlur,j=e.onKeyDown,k=e.onMouseLeave,Y=(0,T.Z)(e,h),U=(n=o.useRef({}),[function(e){return n.current[e]},function(e){return function(t){n.current[e]=t}}]),G=(0,C.Z)(U,2),H=G[0],Q=G[1],z=o.useRef(null),B=function(){if(!M){var e;null===(e=z.current)||void 0===e||e.focus()}};o.useImperativeHandle(t,function(){return{focus:B,blur:function(){if(!M){var e;null===(e=z.current)||void 0===e||e.blur()}}}});var W=(0,p.Z)(c||0,{value:i}),J=(0,C.Z)(W,2),K=J[0],X=J[1],$=(0,p.Z)(null),q=(0,C.Z)($,2),ee=q[0],et=q[1],en=function(e,t){var n="rtl"===y,a=e+1;if(u){var o,r,l,c,i,A,s,O,I,d=H(e),D=(c=(l=d.ownerDocument).body,i=l&&l.documentElement,o=(A=d.getBoundingClientRect()).left,r=A.top,s={left:o-=i.clientLeft||c.clientLeft||0,top:r-=i.clientTop||c.clientTop||0},I=(O=d.ownerDocument).defaultView||O.parentWindow,s.left+=function(e){var t=e.pageXOffset,n="scrollLeft";if("number"!=typeof t){var a=e.document;"number"!=typeof(t=a.documentElement[n])&&(t=a.body[n])}return t}(I),s.left),f=d.clientWidth;n&&t-D>f/2?a-=.5:!n&&t-D<f/2&&(a-=.5)}return a},ea=function(e){X(e),null==F||F(e)},eo=o.useState(!1),er=(0,C.Z)(eo,2),el=er[0],ec=er[1],ei=o.useState(null),eA=(0,C.Z)(ei,2),es=eA[0],eO=eA[1],eu=function(e,t){var n=en(t,e.pageX);n!==ee&&(eO(n),et(null)),null==V||V(n)},eI=function(e){M||(eO(null),et(null),null==V||V(void 0)),e&&(null==k||k(e))},ed=function(e,t){var n=en(t,e.pageX),a=!1;D&&(a=n===K),eI(),ea(a?0:n),et(a?n:null)};o.useEffect(function(){x&&!M&&B()},[]);var eD=Array(s).fill(0).map(function(e,t){return o.createElement(w,{ref:Q(t),index:t,count:s,disabled:M,prefixCls:"".concat(r,"-star"),allowHalf:u,value:null===es?K:es,onClick:ed,onHover:eu,key:e||t,character:L,characterRender:g,focused:el})}),ef=E()(r,l,(0,N.Z)((0,N.Z)({},"".concat(r,"-disabled"),M),"".concat(r,"-rtl"),"rtl"===y));return o.createElement("ul",(0,I.Z)({className:ef,onMouseLeave:eI,tabIndex:M?-1:void 0===b?0:b,onFocus:M?null:function(){ec(!0),null==P||P()},onBlur:M?null:function(){ec(!1),null==Z||Z()},onKeyDown:M?null:function(e){var t=e.keyCode,n="rtl"===y,a=u?.5:1;_&&(t===v.Z.RIGHT&&K<s&&!n?(ea(K+a),e.preventDefault()):t===v.Z.LEFT&&K>0&&!n?(ea(K-a),e.preventDefault()):t===v.Z.RIGHT&&K>0&&n?(ea(K-a),e.preventDefault()):t===v.Z.LEFT&&K<s&&n&&(ea(K+a),e.preventDefault())),null==j||j(e)},ref:z,role:"radiogroup"},(0,m.Z)(Y,{aria:!0,data:!0,attr:!0})),eD)}),L=n(8750),g=n(9619),M=n(76),S=n(8170),y=n(3561),b=n(3204);let x=e=>{let{componentCls:t}=e;return{["".concat(t,"-star")]:{position:"relative",display:"inline-block",color:"inherit",cursor:"pointer","&:not(:last-child)":{marginInlineEnd:e.marginXS},"> div":{transition:"all ".concat(e.motionDurationMid,", outline 0s"),"&:hover":{transform:e.starHoverScale},"&:focus":{outline:0},"&:focus-visible":{outline:"".concat((0,M.bf)(e.lineWidth)," dashed ").concat(e.starColor),transform:e.starHoverScale}},"&-first, &-second":{color:e.starBg,transition:"all ".concat(e.motionDurationMid),userSelect:"none"},"&-first":{position:"absolute",top:0,insetInlineStart:0,width:"50%",height:"100%",overflow:"hidden",opacity:0},["&-half ".concat(t,"-star-first, &-half ").concat(t,"-star-second")]:{opacity:1},["&-half ".concat(t,"-star-first, &-full ").concat(t,"-star-second")]:{color:"inherit"}}}},V=e=>({["&-rtl".concat(e.componentCls)]:{direction:"rtl"}}),F=e=>{let{componentCls:t}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,S.Wf)(e)),{display:"inline-block",margin:0,padding:0,color:e.starColor,fontSize:e.starSize,lineHeight:1,listStyle:"none",outline:"none",["&-disabled".concat(t," ").concat(t,"-star")]:{cursor:"default","> div:hover":{transform:"scale(1)"}}}),x(e)),V(e))}};var P=(0,y.I$)("Rate",e=>[F((0,b.TS)(e,{}))],e=>({starColor:e.yellow6,starSize:.5*e.controlHeightLG,starHoverScale:"scale(1.1)",starBg:e.colorFillContent})),Z=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)0>t.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]]);return n};let j=o.forwardRef((e,t)=>{let{prefixCls:n,className:a,rootClassName:r,style:l,tooltips:c,character:i=o.createElement(f,null)}=e,A=Z(e,["prefixCls","className","rootClassName","style","tooltips","character"]),{getPrefixCls:s,direction:O,rate:u}=o.useContext(L.E_),I=s("rate",n),[d,D,_]=P(I),N=Object.assign(Object.assign({},null==u?void 0:u.style),l);return d(o.createElement(R,Object.assign({ref:t,character:i,characterRender:(e,t)=>{let{index:n}=t;return c?o.createElement(g.Z,{title:c[n]},e):e}},A,{className:E()(a,r,D,_,null==u?void 0:u.className),style:N,prefixCls:I,direction:O})))});var k=n(8520),Y=n(5002),U=n(6286),G=n(8924),H=n(5622),Q=n(9582),z=n(7346),B=n(5211);B.kL.register(B.uw,B.f$,B.ZL,B.Dx,B.u,B.De);let W=[{title:"Atendimento",dataIndex:"COD_ATENDIMENTO_AVALIADO",key:"COD_ATENDIMENTO_AVALIADO"},{title:"Cliente",dataIndex:"CLIENTE",key:"CLIENTE"},{title:"Contato",dataIndex:"CONTATO",key:"CONTATO"},{title:"N\xfamero",dataIndex:"NUMERO",key:"NUMERO",render:e=>(0,a.jsx)(a.Fragment,{children:(0,Q.Z)(e)})},{title:"Atendente",dataIndex:"OPERADOR",key:"OPERADOR"},{title:"Avalia\xe7\xe3o",dataIndex:"AVALIACAO",key:"AVALIACAO",render:e=>(0,a.jsx)(j,{value:e,disabled:!0})},{title:"In\xedcio do atendimento",dataIndex:"DATA_INICIO_AVALIADO",key:"DATA_INICIO_AVALIADO",render:(e,t)=>{let{DATA_INICIO_AVALIADO:n}=t;return(0,a.jsx)(a.Fragment,{children:new Date(n).toLocaleString()})}},{title:"Fim do atendimento",dataIndex:"DATA_FIM_AVALIADO",key:"DATA_FIM_AVALIADO",render:(e,t)=>{let{DATA_FIM_AVALIADO:n}=t;return(0,a.jsx)(a.Fragment,{children:new Date(n).toLocaleString()})}}],{RangePicker:J}=k.default;function K(){let[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)([]),[l,c]=(0,o.useState)(!0),[i,A]=(0,o.useState)(1),[O,I]=(0,o.useState)(0),[d,D]=(0,o.useState)([]),[f,_]=(0,o.useState)([]),[E,N]=(0,o.useState)({OPERADOR:"",CLIENTE:"",CONTATO:"",NUMERO:"",DATA_INICIO_AVALIADO_START:"",DATA_INICIO_AVALIADO_END:"",DATA_FIM_AVALIADO_START:"",DATA_FIM_AVALIADO_END:""});(0,o.useEffect)(()=>{s({ORDENAR_POR:"DATA_INICIO_AVALIADO",page:"1",perPage:"9999999"}).then(e=>{let{data:n}=e;t(n),r(n),I(n.length),c(!1);let a=Array.from(new Set(n.map(e=>e.OPERADOR))),o=Array.from(new Set(n.map(e=>e.CLIENTE)));D(a),_(o)})},[]);let C=e=>t=>{N({...E,[e]:t})},{labels:T,averages:p}=(e=>{let t={};e.forEach(e=>{t[e.OPERADOR]||(t[e.OPERADOR]=[]),t[e.OPERADOR].push(e.AVALIACAO)});let n=Object.keys(t),a=n.map(e=>{let n=t[e];return n.reduce((e,t)=>e+t,0)/n.length});return{labels:n,averages:a}})(n);return(0,a.jsxs)("main",{className:u().main,children:[(0,a.jsxs)("div",{className:u()["filters-container"],children:[(0,a.jsx)(Y.Z,{options:f.map(e=>({value:e})),style:{width:400},onChange:C("CLIENTE"),placeholder:"Cliente",value:E.CLIENTE}),(0,a.jsx)(Y.Z,{options:d.map(e=>({value:e})),style:{width:400},onSelect:C("OPERADOR"),placeholder:"Operador",value:E.OPERADOR}),(0,a.jsx)(U.Z,{placeholder:"Contato",style:{width:400},value:E.CONTATO,onChange:e=>C("CONTATO")(e.target.value)}),(0,a.jsx)(U.Z,{placeholder:"N\xfamero",style:{width:400},value:E.NUMERO,onChange:e=>C("NUMERO")(e.target.value)}),(0,a.jsx)(J,{format:"YYYY-MM-DD",onChange:(e,t)=>{if(e){let[t,n]=e;N({...E,DATA_INICIO_AVALIADO_START:(null==t?void 0:t.format("YYYY-MM-DD"))||"",DATA_INICIO_AVALIADO_END:(null==n?void 0:n.format("YYYY-MM-DD"))||""})}else N({...E,DATA_INICIO_AVALIADO_START:"",DATA_INICIO_AVALIADO_END:""})},placeholder:["In\xedcio (min)","In\xedcio (max)"],style:{width:400}}),(0,a.jsx)(J,{format:"YYYY-MM-DD",onChange:(e,t)=>{if(e){let[t,n]=e;N({...E,DATA_FIM_AVALIADO_START:(null==t?void 0:t.format("YYYY-MM-DD"))||"",DATA_FIM_AVALIADO_END:(null==n?void 0:n.format("YYYY-MM-DD"))||""})}else N({...E,DATA_FIM_AVALIADO_START:"",DATA_FIM_AVALIADO_END:""})},placeholder:["Fim (min)","Fim (max)"],style:{width:400}}),(0,a.jsx)("div",{style:{width:400},children:(0,a.jsx)(G.ZP,{type:"primary",onClick:()=>{r(e.filter(e=>![e.OPERADOR.toLowerCase().includes(E.OPERADOR.toLowerCase()),e.CLIENTE.toLowerCase().includes(E.CLIENTE.toLowerCase()),e.CONTATO.toLowerCase().includes(E.CONTATO.toLowerCase()),e.NUMERO.toLowerCase().includes(E.NUMERO.toLowerCase()),(!E.DATA_INICIO_AVALIADO_START||new Date(e.DATA_INICIO_AVALIADO)>=new Date(E.DATA_INICIO_AVALIADO_START))&&(!E.DATA_INICIO_AVALIADO_END||new Date(e.DATA_INICIO_AVALIADO)<=new Date(E.DATA_INICIO_AVALIADO_END)),(!E.DATA_FIM_AVALIADO_START||new Date(e.DATA_FIM_AVALIADO)>=new Date(E.DATA_FIM_AVALIADO_START))&&(!E.DATA_FIM_AVALIADO_END||new Date(e.DATA_FIM_AVALIADO)<=new Date(E.DATA_FIM_AVALIADO_END))].includes(!1)))},style:{width:150},children:"Filtrar"})})]}),(0,a.jsx)(H.Z,{columns:W,dataSource:n,rowKey:"CODIGO_ATENDIMENTO",tableLayout:"auto",loading:l,pagination:{current:i,total:O,pageSize:20},onChange:e=>{A(e.current)}}),(0,a.jsx)("div",{className:u()["chart-container"],children:(0,a.jsx)(z.$Q,{data:{labels:T,datasets:[{label:"Avalia\xe7\xe3o M\xe9dia por Operador",data:p,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:e=>{let t=e.raw;return"Nota M\xe9dia: ".concat(t.toFixed(2))}}}}}})})]})}},9500:function(e){e.exports={main:"page_main__P3Igf","filters-container":"page_filters-container__2fgbt","charts-container":"page_charts-container__6frE3"}}},function(e){e.O(0,[518,674,490,971,23,744],function(){return e(e.s=2451)}),_N_E=e.O()}]);