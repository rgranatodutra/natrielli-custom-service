(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[500],{2451:function(e,A,t){Promise.resolve().then(t.bind(t,9447))},9447:function(e,A,t){"use strict";t.r(A),t.d(A,{default:function(){return S}});var a=t(7437),n=t(2265),O=t(4649),I=t(1258),D=t(357);let _=new I.InstancesMannager(D.env.REACT_APP_API_URL||"https://contec.inf.br"),l=["DATA_FIM_AVALIADO","DATA_FIM_PESQUISA","DATA_INICIO_AVALIADO","DATA_INICIO_PESQUISA"],o=["CONTATO","CLIENTE","OPERADOR","NUMERO"],r=["COD_ATENDIMENTO_AVALIADO","COD_ATENDIMENTO_PESQUISA","COD_CLIENTE","COD_NUMERO","COD_OPERADOR_AVALIADO"];async function i(e){let[A,t]=(0,O.createWhereString)({parameters:e,alias:"ar",dateColumns:l,likeColumns:o,numberColumns:r}),a=await _.executeQuery("natrielli","SELECT * FROM (".concat("SELECT\n   waa.CODIGO AS COD_ATENDIMENTO_AVALIADO,\n   wap.CODIGO AS COD_ATENDIMENTO_PESQUISA,\n   waa.CODIGO_OPERADOR AS COD_OPERADOR_AVALIADO,\n   waa.CODIGO_CLIENTE AS COD_CLIENTE,\n   waa.CODIGO_NUMERO AS COD_NUMERO,\n   op.NOME AS OPERADOR,\n   cli.RAZAO AS CLIENTE,\n   wcn.NOME AS CONTATO,\n   wcn.NUMERO AS  NUMERO,\n   waa.DATA_INICIO AS DATA_INICIO_AVALIADO,\n   waa.DATA_FIM AS DATA_FIM_AVALIADO,\n   wap.DATA_INICIO AS DATA_INICIO_PESQUISA,\n   wap.DATA_FIM AS DATA_FIM_PESQUISA,\n   wf.NOTA_ATENDIMENTO AS AVALIACAO\nFROM w_atendimentos_feedbacks wf\nINNER JOIN w_atendimentos wap ON wap.CODIGO = wf.CODIGO_ATENDIMENTO\nINNER JOIN w_atendimentos waa ON waa.CODIGO = wf.CODIGO_ATENDIMENTO_AVALIADO\nINNER JOIN w_clientes_numeros wcn ON wcn.CODIGO = waa.CODIGO_NUMERO\nINNER JOIN clientes cli ON cli.CODIGO = waa.CODIGO_CLIENTE\nINNER JOIN operadores op ON op.CODIGO = wf.CODIGO_OPERADOR\n",") ar \n").concat(A),t).then(e=>e.result);return(0,O.toPaginated)(a,+e.page,+e.perPage)}var c=t(9500),N=t.n(c),s=t(6122),T=t(8520),E=t(5002),C=t(6286),d=t(8924),L=t(5622),R=t(7346),u=t(5211);u.kL.register(u.uw,u.f$,u.ZL,u.Dx,u.u,u.De);let w=[{title:"Atendimento",dataIndex:"COD_ATENDIMENTO_AVALIADO",key:"COD_ATENDIMENTO_AVALIADO"},{title:"Cliente",dataIndex:"CLIENTE",key:"CLIENTE"},{title:"Contato",dataIndex:"CONTATO",key:"CONTATO"},{title:"N\xfamero",dataIndex:"NUMERO",key:"NUMERO",render:e=>{var A;return(0,a.jsx)(a.Fragment,{children:13===(A=e).length?"+".concat(A.slice(0,2)," (").concat(A.slice(2,4),") ").concat(A.slice(4,5)," ").concat(A.slice(5,9),"-").concat(A.slice(9,13)):12===A.length?"+".concat(A.slice(0,2)," (").concat(A.slice(2,4),") ").concat(A.slice(4,8),"-").concat(A.slice(8,12)):11===A.length?"(".concat(A.slice(0,2),") ").concat(A.slice(2,5),"-").concat(A.slice(5,8),"-").concat(A.slice(8,11)):10===A.length?"(".concat(A.slice(0,2),") ").concat(A.slice(2,6),"-").concat(A.slice(6,10)):A})}},{title:"Atendente",dataIndex:"OPERADOR",key:"OPERADOR"},{title:"Avalia\xe7\xe3o",dataIndex:"AVALIACAO",key:"AVALIACAO",render:e=>(0,a.jsx)(s.Z,{value:e,disabled:!0})},{title:"In\xedcio do atendimento",dataIndex:"DATA_INICIO_AVALIADO",key:"DATA_INICIO_AVALIADO",render:(e,A)=>{let{DATA_INICIO_AVALIADO:t}=A;return(0,a.jsx)(a.Fragment,{children:new Date(t).toLocaleString()})}},{title:"Fim do atendimento",dataIndex:"DATA_FIM_AVALIADO",key:"DATA_FIM_AVALIADO",render:(e,A)=>{let{DATA_FIM_AVALIADO:t}=A;return(0,a.jsx)(a.Fragment,{children:new Date(t).toLocaleString()})}}],{RangePicker:M}=T.default;function S(){let[e,A]=(0,n.useState)([]),[t,O]=(0,n.useState)([]),[I,D]=(0,n.useState)(!0),[_,l]=(0,n.useState)(1),[o,r]=(0,n.useState)(0),[c,s]=(0,n.useState)([]),[T,u]=(0,n.useState)([]),[S,p]=(0,n.useState)({OPERADOR:"",CLIENTE:"",CONTATO:"",NUMERO:"",DATA_INICIO_AVALIADO_START:"",DATA_INICIO_AVALIADO_END:"",DATA_FIM_AVALIADO_START:"",DATA_FIM_AVALIADO_END:""});(0,n.useEffect)(()=>{i({ORDENAR_POR:"DATA_INICIO_AVALIADO",page:"1",perPage:"9999999"}).then(e=>{let{data:t}=e;A(t),O(t),r(t.length),D(!1);let a=Array.from(new Set(t.map(e=>e.OPERADOR))),n=Array.from(new Set(t.map(e=>e.CLIENTE)));s(a),u(n)})},[]);let h=e=>A=>{p({...S,[e]:A})},{labels:V,averages:m}=(e=>{let A={};e.forEach(e=>{A[e.OPERADOR]||(A[e.OPERADOR]=[]),A[e.OPERADOR].push(e.AVALIACAO)});let t=Object.keys(A),a=t.map(e=>{let t=A[e];return t.reduce((e,A)=>e+A,0)/t.length});return{labels:t,averages:a}})(t);return(0,a.jsxs)("main",{className:N().main,children:[(0,a.jsxs)("div",{className:N()["filters-container"],children:[(0,a.jsx)(E.Z,{options:T.map(e=>({value:e})),style:{width:400},onChange:h("CLIENTE"),placeholder:"Cliente",value:S.CLIENTE}),(0,a.jsx)(E.Z,{options:c.map(e=>({value:e})),style:{width:400},onSelect:h("OPERADOR"),placeholder:"Operador",value:S.OPERADOR}),(0,a.jsx)(C.Z,{placeholder:"Contato",style:{width:400},value:S.CONTATO,onChange:e=>h("CONTATO")(e.target.value)}),(0,a.jsx)(C.Z,{placeholder:"N\xfamero",style:{width:400},value:S.NUMERO,onChange:e=>h("NUMERO")(e.target.value)}),(0,a.jsx)(M,{format:"YYYY-MM-DD",onChange:(e,A)=>{if(e){let[A,t]=e;p({...S,DATA_INICIO_AVALIADO_START:(null==A?void 0:A.format("YYYY-MM-DD"))||"",DATA_INICIO_AVALIADO_END:(null==t?void 0:t.format("YYYY-MM-DD"))||""})}else p({...S,DATA_INICIO_AVALIADO_START:"",DATA_INICIO_AVALIADO_END:""})},placeholder:["In\xedcio (min)","In\xedcio (max)"],style:{width:400}}),(0,a.jsx)(M,{format:"YYYY-MM-DD",onChange:(e,A)=>{if(e){let[A,t]=e;p({...S,DATA_FIM_AVALIADO_START:(null==A?void 0:A.format("YYYY-MM-DD"))||"",DATA_FIM_AVALIADO_END:(null==t?void 0:t.format("YYYY-MM-DD"))||""})}else p({...S,DATA_FIM_AVALIADO_START:"",DATA_FIM_AVALIADO_END:""})},placeholder:["Fim (min)","Fim (max)"],style:{width:400}}),(0,a.jsx)("div",{style:{width:400},children:(0,a.jsx)(d.ZP,{type:"primary",onClick:()=>{O(e.filter(e=>![e.OPERADOR.toLowerCase().includes(S.OPERADOR.toLowerCase()),e.CLIENTE.toLowerCase().includes(S.CLIENTE.toLowerCase()),e.CONTATO.toLowerCase().includes(S.CONTATO.toLowerCase()),e.NUMERO.toLowerCase().includes(S.NUMERO.toLowerCase()),(!S.DATA_INICIO_AVALIADO_START||new Date(e.DATA_INICIO_AVALIADO)>=new Date(S.DATA_INICIO_AVALIADO_START))&&(!S.DATA_INICIO_AVALIADO_END||new Date(e.DATA_INICIO_AVALIADO)<=new Date(S.DATA_INICIO_AVALIADO_END)),(!S.DATA_FIM_AVALIADO_START||new Date(e.DATA_FIM_AVALIADO)>=new Date(S.DATA_FIM_AVALIADO_START))&&(!S.DATA_FIM_AVALIADO_END||new Date(e.DATA_FIM_AVALIADO)<=new Date(S.DATA_FIM_AVALIADO_END))].includes(!1)))},style:{width:150},children:"Filtrar"})})]}),(0,a.jsx)(L.Z,{columns:w,dataSource:t,rowKey:"CODIGO_ATENDIMENTO",tableLayout:"auto",loading:I,pagination:{current:_,total:o,pageSize:20},onChange:e=>{l(e.current)}}),(0,a.jsx)("div",{className:N()["chart-container"],children:(0,a.jsx)(R.$Q,{data:{labels:V,datasets:[{label:"Avalia\xe7\xe3o M\xe9dia por Operador",data:m,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:e=>{let A=e.raw;return"Nota M\xe9dia: ".concat(A.toFixed(2))}}}}}})})]})}},9500:function(e){e.exports={main:"page_main__P3Igf","filters-container":"page_filters-container__2fgbt","charts-container":"page_charts-container__6frE3"}}},function(e){e.O(0,[518,674,123,971,23,744],function(){return e(e.s=2451)}),_N_E=e.O()}]);